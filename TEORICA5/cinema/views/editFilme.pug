extends layout

block content
  .w3-card-4 
    header.w3-container.w3-blue 
      h1= tit

    .w3-container
      h2 Editar Filme

      form(action=`/filmes/edit/${filme.id}` method="POST")
        fieldset
          legend Dados do Filme
          
          label
            h3 Ano  
            input.w3-input(type="text" name="year" value=filme.year required)

          label
            h3 Título  
            input.w3-input(type="text" name="title" value=filme.title required)

        fieldset
          legend Elenco  
          ul.w3-ul#cast-list
            each ator, index in filme.cast
              li 
                input.w3-input(type="text" name="cast" value=ator)
                button.w3-button.w3-red(type="button" onclick="removeField(this)") Eliminar Ator

          button.w3-button.w3-light-blue(type="button" onclick="addCastField()") Adicionar Ator

        fieldset
          legend Gêneros  
          ul.w3-ul#genres-list
            each g, index in filme.genres
              li 
                input.w3-input(type="text" name="genres" value=g)
                button.w3-button.w3-red(type="button" onclick="removeField(this)") Eliminar Gênero

          button.w3-button.w3-light-blue(type="button" onclick="addGenreField()") Adicionar Gênero

        button.w3-button.w3-green(type="submit") Guardar

    footer.w3-container.w3-blue 
      address Generated by EW2025 class

  script.
    function removeField(button) {
      button.parentElement.remove()
    }

    function addCastField() {
      const ul = document.getElementById("cast-list");
      const li = document.createElement("li");
      li.innerHTML = '<input class="w3-input" type="text" name="cast" value=""> <button class="w3-button w3-red" type="button" onclick="removeField(this)">Eliminar</button>';
      ul.appendChild(li);
    }

    function addGenreField() {
      const ul = document.getElementById("genres-list");
      const li = document.createElement("li");
      li.innerHTML = '<input class="w3-input" type="text" name="genres" value=""> <button class="w3-button w3-red" type="button" onclick="removeField(this)">Eliminar</button>';
      ul.appendChild(li);
    }
