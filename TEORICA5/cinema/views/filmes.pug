extends layout

block content
  .w3-card-4 
    header.w3-container.w3-blue 
      h1= tit
    w3.container
      table.w3-table-all
        tr 
            th Ano 
            th Titulo 
            th Elenco 
            th Generos 
            th Opções
        each f in lfilmes
          tr
            td= f.year
            td= f.title
            td
              ul.w3-ul
                each ator in f.cast
                  li= ator
            td
              ul.w3-ul
                each g in f.genres
                  li= g
            td
              div
                a(href=`/filmes/edit/${f.id}`) Edit
                br
                button(onclick=`deleteFilme(${f.id})`) Delete

        script.
          function deleteFilme(id) {
            if (confirm('Are you sure you want to delete this movie?')) {
              fetch(`/filmes/${id}`, {
                method: 'DELETE',
                headers: {
                  'Content-Type': 'application/json',
                }
              })
              .then(response => {
                if (response.ok) {
                  location.reload();
                } else {
                  alert('Failed to delete the movie');
                }
              })
              .catch(error => {
                console.log('Error:', error);
                alert('An error occurred while deleting the movie.');
              });
            }
          }

                        


    footer.w3-container.w3-blue 
      adress Generated by EW2025 class
